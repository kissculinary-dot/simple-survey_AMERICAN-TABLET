<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Customer Feedback</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
body { margin:0; font-family:'Montserrat',Arial,sans-serif; text-align:center; background:#fefefe; color:#333; }
.header { margin-top:50px; }
.header h2 { font-size:50px; font-weight:700; margin:0; color:#222; letter-spacing:2px; text-transform:uppercase; min-height:60px; }
.header h1 { font-size:38px; margin-top:15px; font-weight:500; color:#555; }
.options { position:absolute; bottom:0; width:100%; height:65%; display:flex; justify-content:center; align-items:center; gap:100px; }
.circle { width:260px; height:260px; border-radius:50%; border:none; font-size:36px; cursor:pointer; transition:0.3s ease; box-shadow:0 14px 35px rgba(0,0,0,0.15); background:#fff; display:flex; flex-direction:column; justify-content:center; align-items:center; color:#333; }
.circle span { margin-top:12px; font-size:22px; font-weight:600; }
.circle:hover { transform:scale(1.08); box-shadow:0 18px 45px rgba(0,0,0,0.2); }
.selected { transform:scale(1.12); background-color:#e0f7ff; box-shadow:0 20px 55px rgba(0,0,0,0.25); }
#thankYou { position:absolute; bottom:40px; width:100%; font-size:28px; font-weight:500; opacity:0; transition:opacity 0.4s ease; color:#007acc; }
.show { opacity:1; }
</style>
</head>
<body>

<div class="header">
  <h2 id="mealHeader"></h2>
  <h1>How was your meal experience?</h1>
</div>

<div class="options">
  <button class="circle" data-value="Loved it">‚ù§Ô∏è<span>Loved it</span></button>
  <button class="circle" data-value="Okay">üôÇ<span>Okay</span></button>
  <button class="circle" data-value="Needs improvement">‚ö†Ô∏è<span>Needs Improvement</span></button>
</div>

<div id="thankYou">Thank you for your feedback!</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwLovLyr49noqaJCFaRyFyG477lIRP2bvoC50t6s1dl6xvP0bL3jMSMXNVUCsaZr_9L/exec";

function getCurrentMeal() {
  const now = new Date();
  const totalMinutes = now.getHours() * 60 + now.getMinutes();

  if (totalMinutes >= 7*60 && totalMinutes <= 11*60+59) return "Breakfast";
  if (totalMinutes >= 12*60 && totalMinutes <= 17*60+29) return "American Menu";
  if (totalMinutes >= 17*60+30 && totalMinutes <= 21*60) return "Dinner";
  return "";
}

function setMealHeader() {
  document.getElementById("mealHeader").textContent = getCurrentMeal();
}

setMealHeader();
setInterval(setMealHeader, 1000);

document.querySelectorAll(".circle").forEach(button => {
  button.addEventListener("click", function () {
    const feedbackValue = this.dataset.value;
    const mealType = getCurrentMeal();
    if (!mealType) return;

    this.classList.add("selected");

    fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        meal: mealType,
        response: feedbackValue
      })
    })
    .then(res => res.json())
    .then(data => console.log("Success:", data))
    .catch(err => console.error("Error:", err));

    const thankYou = document.getElementById("thankYou");
    thankYou.classList.add("show");

    setTimeout(() => {
      this.classList.remove("selected");
      thankYou.classList.remove("show");
    }, 2000);
  });
});
</script>

</body>
</html>
